<h2 class="inline-flex"><%= h("##{@event_notification.id}") %></h2>

<div class="contextual">
	<%= link_to l(:event_notification_publish), publish_event_notification_path(@event_notification), method: :put, class: "icon icon-arrow-right" %>
</div>

<div class="issue">
	<div class="attributes" style="margin-top: 0;">
		<div class="splitcontent">
			<div class="splitcontentleft">
				<div class="subject_type attribute">
					<div class="label">Subject Type:</div>
					<div class="value"><%= @event_notification.subject_type %></div>
				</div>

				<div class="assigned-to attribute">
					<div class="label">Subject:</div>
					<div class="value">
            <% if @event_notification.subject.present? %>
              <% case @event_notification.subject_type %>
              <% when "Project" %>
                <%= link_to @event_notification.subject.name, project_path(@event_notification.subject) %>
              <% when "Issue" %>
                <%= link_to @event_notification.subject.subject, issue_path(@event_notification.subject) %>
              <% when "User" %>
                <%= link_to @event_notification.subject.login, user_path(@event_notification.subject) %>
              <% when "Group" %>
                <%= link_to @event_notification.subject.lastname, group_path(@event_notification.subject) %>
              <% when "Role" %>
                <%= link_to @event_notification.subject.name, edit_role_path(@event_notification.subject) %>
              <% when "TimeEntry" %>
                <%= link_to @event_notification.subject.project.name, project_time_entries_path(@event_notification.subject.project) %>
              <% end %>
            <% else %>
              <%= @event_notification.subject_id %>
              (Object Deleted)
            <% end %>
					</div>
				</div>

				<div class="action attribute">
					<div class="label">Action:</div>
					<div class="value"><%= @event_notification.action %></div>
				</div>
				<div class="user attribute">
					<div class="label">User:</div>
					<div class="value">
            <% if @event_notification.current_user.present? %>
              <%= link_to @event_notification.current_user.login, user_path(@event_notification.current_user) %>
            <% else %>
              <%= @event_notification.current_user_id %>
            <% end %>
					</div>
				</div>

				<div class="created_at attribute">
					<div class="label">Created:</div>
					<div class="value"><%= format_time(@event_notification.created_at) %></div>
				</div>

				<div class="published_at attribute">
					<div class="label">Published At:</div>
					<div class="value">
            <% if @event_notification.published_at.present? %>
              <%= format_time(@event_notification.published_at) %>
            <% else %>
              <span class="icon icon-not-ok" title="<%= @event_notification.error %>"></span>
            <% end %>
					</div>
				</div>
			</div>
			<div class="splitcontentleft"></div>
		</div>
	</div>
</div>

<% content_for :sidebar do %>
  <h3><%=l(:label_administration)%></h3>
  <%= render :partial => 'admin/menu' %>
<% end %>

<% html_title("#{l(:event_notification)} ##{@event_notification.id}") -%>
